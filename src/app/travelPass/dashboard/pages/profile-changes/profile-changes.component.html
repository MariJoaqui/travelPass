<!-- Nav -->
<app-dashboard-nav></app-dashboard-nav>

<!-- Body -->
<div class="body padding">
  <!-- Volver -->
  <app-go-back></app-go-back>

  <div class="mt-5">
    <!-- Título -->
    <h3 class="ft-blue-1">Editar mi perfil</h3>
    <div class="divider-md bg-blue-3"></div>
    <div class="divider-sm bg-blue-3 display-none"></div>

    <!-- Formulario -->
    <div class="form text-start">
      <form  [formGroup]="form" (ngSubmit)="update()">

        <!-- Nombre -->
        <div>
          <label class="form-label">Nombre</label>
          <input class="form-control" 
                 formControlName="name" 
                 [placeholder]="user.name | titlecase"
                 type="text">
        </div>
        <div class="ft-red-1 text-start mb-3 mt-1" *ngIf="invalidField('name')"> {{ errorMessage('name') }} </div>

        <!-- Apellido -->
        <div class="mt-3">
          <label class="form-label">Apellido</label>
          <input class="form-control" 
                 formControlName="lastName" 
                 [placeholder]="user.lastName | titlecase"
                 type="text">
        </div>
        <div class="ft-red-1 text-start mb-3 mt-1" *ngIf="invalidField('lastName')"> {{ errorMessage('lastName') }} </div>

        <!-- Estado -->
        <label class="form-label mt-3">Ubicación</label>
        <div class="form-floating">
          <select class="form-select" formControlName="state">
            <option *ngFor="let state of states" [value]="state.id"> {{ state.name | titlecase }} </option>
          </select>
          <label for="floatingSelectGrid">Estado</label>
        </div>
        <div class="ft-red-1 text-start mb-3 mt-1" *ngIf="invalidField('state')"> {{ errorMessage('state') }} </div>

        <!-- Teléfono -->
        <div class="mt-3">
          <label class="form-label">Teléfono</label>
          <input class="form-control" 
                 formControlName="phoneNumber"
                 [placeholder]="user.phoneNumber"
                 type="text">
        </div>
        <div class="ft-red-1 text-start mb-3 mt-1" *ngIf="invalidField('phoneNumber')"> {{ validatePhoneNumber }} </div>

        <!-- Correo -->
        <div class="mt-3">
          <label class="form-label">Correo electrónico</label>
          <input class="form-control" 
                 formControlName="email"
                 [placeholder]="user.email" 
                 type="text">
        </div>
        <div class="ft-red-1 text-start mb-3 mt-1" *ngIf="invalidField('email')"> {{ errorMessage('email') }} </div>

        <!-- Contraseña -->
        <div class="mt-3">
          <label class="form-label">Contraseña</label>
          <input class="form-control" 
                 formControlName="password"
                 [placeholder]="user.password" 
                 type="text">
        </div>
        <div class="ft-red-1 text-start mb-3 mt-1" *ngIf="invalidField('password')"> {{ validatePassword }} </div>

        <!-- Imagen de perfil -->
        <div class="mt-3">
          <label class="form-label">Imagen de perfil</label>
          <input class="form-control" 
                 formControlName="image"
                 [placeholder]="user.image" 
                 type="file"
                 (change)="onCoverImageChange($event)">
        </div>
        <div class="ft-red-1 text-start mb-3 mt-1" *ngIf="invalidField('coverImage')">
          {{ errorMessage('coverImage') }}
        </div>

        <!-- Agregar -->
        <div class="add-button wt-100" *ngIf="hasValue()">
          <button class="blue-button bg-blue-2 ft-white" [disabled]="form.invalid">
            Guardar
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Footer -->
<app-footer-sm class="wt-100"></app-footer-sm>